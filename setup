#!/bin/bash

# Handle: given a file as an argument,
# include it in a file in this directory called .included
# if it is not already there.
# CONSIDER: will only exact-match. do we care? try catting the filename first as well
handle () {
	if ! grep -Fxq "$1" "./.included"; then
		cat "$1" >> "./.included"
	fi
}

FILES="./.bash_*"

# If there are no arguments, then include all.
if [ $# = 0 ]; then
	for f in $FILES
	do
		handle "$f"
	done
else
	# Iterate over arguments. 
	for argn in $@
	do
		# Convert to a path, appending .bash_ to each argument.
		handle "$(readlink -f "./.bash_${argn}")"
	done
fi

IN_FLAG="# myaliases included"

# If the .bashrc doesn't already include .included, make it do that.
if ! grep -Fxq "$IN_FLAG" "~/.bash_aliases"; then
	cat "./.incln" >> "./.testbash"
fi

# Source the bashrc to save changes. 
# Hold off on uncommenting until you know this works for sure.
# source ~/.bashrc
